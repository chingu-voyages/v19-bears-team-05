<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="859px" preserveAspectRatio="none" style="width:1320px;height:859px;" version="1.1" viewBox="0 0 1320 859" width="1320px" zoomAndPan="magnify"><defs><filter height="300%" id="fg2mond7p5mtd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fg2mond7p5mtd)" height="608.1211" style="stroke: #000000; stroke-width: 2.0;" width="1259.5" x="49" y="146.7988"/><rect fill="#FFFFFF" filter="url(#fg2mond7p5mtd)" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="288" x="59" y="200.4199"/><rect fill="#FFFFFF" filter="url(#fg2mond7p5mtd)" height="178.8184" style="stroke: #000000; stroke-width: 2.0;" width="1239.5" x="59" y="524.8359"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="1239.5" x="59" y="659.3887"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="1259.5" x="49" y="710.6543"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="109" x2="109" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="278" x2="278" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="398" x2="398" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="533" x2="533" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="716.5" x2="716.5" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="931.5" x2="931.5" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1082.5" x2="1082.5" y1="86.4883" y2="771.9199"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1221.5" x2="1221.5" y1="86.4883" y2="771.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="83.5352">Patron</text><ellipse cx="33.5" cy="13" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,21 L33.5,48 M20.5,29 L46.5,29 M33.5,48 L20.5,63 M33.5,48 L46.5,63 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="784.4551">Patron</text><ellipse cx="33.5" cy="797.4082" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,805.4082 L33.5,832.4082 M20.5,813.4082 L46.5,813.4082 M33.5,832.4082 L20.5,847.4082 M33.5,832.4082 L46.5,847.4082 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="69" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="76" y="71.5352">Patron UI</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="69" y="770.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="76" y="791.4551">Patron UI</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="220" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="227" y="71.5352">Shopping Cart</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="220" y="770.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="227" y="791.4551">Shopping Cart</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="347" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="354" y="71.5352">Auth Service</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="347" y="770.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="354" y="791.4551">Auth Service</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="460" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="467" y="71.5352">Confirmation Page</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="460" y="770.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="467" y="791.4551">Confirmation Page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="682.5" y="83.5352">Database</text><path d="M699,34 C699,24 717,24 717,24 C717,24 735,24 735,34 L735,60 C735,70 717,70 717,70 C717,70 699,70 699,60 L699,34 " fill="#FEFECE" filter="url(#fg2mond7p5mtd)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M699,34 C699,44 717,44 717,44 C717,44 735,44 735,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="682.5" y="784.4551">Database</text><path d="M699,797.4082 C699,787.4082 717,787.4082 717,787.4082 C717,787.4082 735,787.4082 735,797.4082 L735,823.4082 C735,833.4082 717,833.4082 717,833.4082 C717,833.4082 699,833.4082 699,823.4082 L699,797.4082 " fill="#FEFECE" filter="url(#fg2mond7p5mtd)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M699,797.4082 C699,807.4082 717,807.4082 717,807.4082 C717,807.4082 735,807.4082 735,797.4082 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="853.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="860.5" y="71.5352">Transaction Handler</text><rect fill="#FEFECE" filter="url(#fg2mond7p5mtd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="853.5" y="770.9199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="860.5" y="791.4551">Transaction Handler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1020.5" y="83.5352">Payment Provider</text><ellipse cx="1083" cy="13" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1083,21 L1083,48 M1070,29 L1096,29 M1083,48 L1070,63 M1083,48 L1096,63 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1020.5" y="784.4551">Payment Provider</text><ellipse cx="1083" cy="797.4082" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1083,805.4082 L1083,832.4082 M1070,813.4082 L1096,813.4082 M1083,832.4082 L1070,847.4082 M1083,832.4082 L1096,847.4082 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="1155.5" y="83.5352">Vendor Messaging</text><ellipse cx="1222" cy="13" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1222,21 L1222,48 M1209,29 L1235,29 M1222,48 L1209,63 M1222,48 L1235,63 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="1155.5" y="784.4551">Vendor Messaging</text><ellipse cx="1222" cy="797.4082" fill="#FEFECE" filter="url(#fg2mond7p5mtd)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1222,805.4082 L1222,832.4082 M1209,813.4082 L1235,813.4082 M1222,832.4082 L1209,847.4082 M1222,832.4082 L1235,847.4082 " fill="none" filter="url(#fg2mond7p5mtd)" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="97.5,98.4883,107.5,102.4883,97.5,106.4883,101.5,102.4883" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="103.5" y1="102.4883" y2="102.4883"/><polygon fill="#A80036" points="705,127.7988,715,131.7988,705,135.7988,709,131.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="711" y1="131.7988" y2="131.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="116.5" y="127.0566">fetchMenuItems()</text><path d="M49,146.7988 L111,146.7988 L111,153.7988 L101,163.7988 L49,163.7988 L49,146.7988 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="608.1211" style="stroke: #000000; stroke-width: 2.0;" width="1259.5" x="49" y="146.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="64" y="160.3672">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="126" y="159.4336">[items fetched]</text><polygon fill="#A80036" points="120.5,181.4199,110.5,185.4199,120.5,189.4199,116.5,185.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="114.5" x2="716" y1="185.4199" y2="185.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="126.5" y="180.6777">menu items</text><path d="M59,200.4199 L133,200.4199 L133,207.4199 L123,217.4199 L59,217.4199 L59,200.4199 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="288" x="59" y="200.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="74" y="213.9883">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="148" y="213.0547">[adding items]</text><polygon fill="#A80036" points="266.5,235.041,276.5,239.041,266.5,243.041,270.5,239.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="272.5" y1="239.041" y2="239.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="116.5" y="234.2988">addToOrder(menuItem)</text><polygon fill="#A80036" points="120.5,264.3516,110.5,268.3516,120.5,272.3516,116.5,268.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="114.5" x2="277.5" y1="268.3516" y2="268.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="126.5" y="263.6094">update UI</text><polygon fill="#A80036" points="386.5,300.6621,396.5,304.6621,386.5,308.6621,390.5,304.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="392.5" y1="304.6621" y2="304.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="116.5" y="299.9199">login()</text><polygon fill="#A80036" points="120.5,329.9727,110.5,333.9727,120.5,337.9727,116.5,333.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="114.5" x2="397.5" y1="333.9727" y2="333.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="126.5" y="329.2305">setToken(token)</text><polygon fill="#A80036" points="705,359.2832,715,363.2832,705,367.2832,709,363.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="711" y1="363.2832" y2="363.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="116.5" y="358.541">createCustomerOrder(transactionID, token)</text><polygon fill="#A80036" points="521,388.5938,531,392.5938,521,396.5938,525,392.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109.5" x2="527" y1="392.5938" y2="392.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="116.5" y="387.8516">redirect(transactionID)</text><polygon fill="#A80036" points="705,417.9043,715,421.9043,705,425.9043,709,421.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="533" x2="711" y1="421.9043" y2="421.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="540" y="417.1621">fetchCustomerOrder()</text><polygon fill="#A80036" points="544,447.2148,534,451.2148,544,455.2148,540,451.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="538" x2="716" y1="451.2148" y2="451.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="550" y="446.4727">Customer Order Returned</text><polygon fill="#A80036" points="1071,476.5254,1081,480.5254,1071,484.5254,1075,480.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="533" x2="1077" y1="480.5254" y2="480.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="540" y="475.7832">redirectToCheckout( orderItems[])</text><polygon fill="#A80036" points="943,505.8359,933,509.8359,943,513.8359,939,509.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="937" x2="1082" y1="509.8359" y2="509.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="949" y="505.0938">returnToken(token)</text><path d="M59,524.8359 L121,524.8359 L121,531.8359 L111,541.8359 L59,541.8359 L59,524.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="178.8184" style="stroke: #000000; stroke-width: 2.0;" width="1239.5" x="59" y="524.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="74" y="538.4043">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="136" y="537.4707">[transaction success]</text><polygon fill="#A80036" points="728,559.457,718,563.457,728,567.457,724,563.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="931" y1="563.457" y2="563.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="734" y="558.7148">updateTransaction(paymentId)</text><polygon fill="#A80036" points="920,588.7676,930,592.7676,920,596.7676,924,592.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="717" x2="926" y1="592.7676" y2="592.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="724" y="588.0254">Confirmation</text><polygon fill="#A80036" points="120.5,618.0781,110.5,622.0781,120.5,626.0781,116.5,622.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="114.5" x2="931" y1="622.0781" y2="622.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="126.5" y="617.3359">Confirmation</text><polygon fill="#A80036" points="1210,647.3887,1220,651.3887,1210,655.3887,1214,651.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="932" x2="1216" y1="651.3887" y2="651.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="939" y="646.6465">sendMessage(customerOrder)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="59" x2="1298.5" y1="660.3887" y2="660.3887"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="64" y="671.0234">[transaction failure]</text><polygon fill="#A80036" points="120.5,691.6543,110.5,695.6543,120.5,699.6543,116.5,695.6543" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="114.5" x2="931" y1="695.6543" y2="695.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="126.5" y="690.9121">Error Message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="49" x2="1308.5" y1="711.6543" y2="711.6543"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="54" y="722.2891">[error fetching]</text><polygon fill="#A80036" points="120.5,742.9199,110.5,746.9199,120.5,750.9199,116.5,746.9199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="114.5" x2="716" y1="746.9199" y2="746.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="126.5" y="742.1777">error message</text><!--
@startuml
actor Patron
participant "Patron UI"
participant "Shopping Cart"
participant "Auth Service"
participant "Confirmation Page"
database Database
participant "Transaction Handler"
actor "Payment Provider"
actor "Vendor Messaging"

Patron -> "Patron UI"
"Patron UI" -> Database: fetchMenuItems()
alt items fetched
Database - -> "Patron UI": menu items
loop adding items
"Patron UI" -> "Shopping Cart": addToOrder(menuItem)
"Shopping Cart" - -> "Patron UI": update UI
end
"Patron UI" -> "Auth Service": login()
"Auth Service" -> "Patron UI": setToken(token)
"Patron UI" -> Database: createCustomerOrder(transactionID, token)
"Patron UI" - -> "Confirmation Page": redirect(transactionID)
"Confirmation Page" -> Database: fetchCustomerOrder()
Database - -> "Confirmation Page": Customer Order Returned
"Confirmation Page" -> "Payment Provider": redirectToCheckout( orderItems[])
"Payment Provider" -> "Transaction Handler": returnToken(token)
alt transaction success
"Transaction Handler" -> Database: updateTransaction(paymentId)
Database - -> "Transaction Handler": Confirmation
"Transaction Handler" - -> "Patron UI": Confirmation
"Transaction Handler" -> "Vendor Messaging": sendMessage(customerOrder)
else transaction failure
"Transaction Handler" - -> "Patron UI": Error Message
end

else error fetching
Database - -> "Patron UI": error message
end

@enduml

PlantUML version 1.2019.09(Mon Aug 26 17:19:51 BST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 13.0.1+9
Operating System: Mac OS X
OS Version: 10.15.4
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>