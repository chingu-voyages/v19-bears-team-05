<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1292px" preserveAspectRatio="none" style="width:1362px;height:1292px;" version="1.1" viewBox="0 0 1362 1292" width="1362px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dluw97lc3j1i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1dluw97lc3j1i)" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="567" x="616" y="234.7305"/><rect fill="#FFFFFF" filter="url(#f1dluw97lc3j1i)" height="107.2422" style="stroke: #000000; stroke-width: 2.0;" width="1053" x="130" y="383.2832"/><rect fill="#FFFFFF" height="31.3105" style="stroke: none; stroke-width: 1.0;" width="1053" x="130" y="459.2148"/><rect fill="#FFFFFF" filter="url(#f1dluw97lc3j1i)" height="343.7266" style="stroke: #000000; stroke-width: 2.0;" width="1123" x="120" y="504.5254"/><rect fill="#FFFFFF" filter="url(#f1dluw97lc3j1i)" height="224.4844" style="stroke: #000000; stroke-width: 2.0;" width="1103" x="130" y="616.7676"/><rect fill="#FFFFFF" height="60.6211" style="stroke: none; stroke-width: 1.0;" width="1103" x="130" y="780.6309"/><rect fill="#FFFFFF" filter="url(#f1dluw97lc3j1i)" height="237.4395" style="stroke: #000000; stroke-width: 2.0;" width="1120" x="230" y="950.1836"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="1120" x="230" y="1143.3574"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="99" x2="99" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="185" x2="185" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="296" x2="296" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="429" x2="429" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="555" x2="555" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="663" x2="663" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1008" x2="1008" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1121" x2="1121" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1203" x2="1203" y1="86.4883" y2="1204.623"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1286" x2="1286" y1="86.4883" y2="1204.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="83.5352">Patron</text><ellipse cx="33.5" cy="13" fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,21 L33.5,48 M20.5,29 L46.5,29 M33.5,48 L20.5,63 M33.5,48 L46.5,63 " fill="none" filter="url(#f1dluw97lc3j1i)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="1217.1582">Patron</text><ellipse cx="33.5" cy="1230.1113" fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,1238.1113 L33.5,1265.1113 M20.5,1246.1113 L46.5,1246.1113 M33.5,1265.1113 L20.5,1280.1113 M33.5,1265.1113 L46.5,1280.1113 " fill="none" filter="url(#f1dluw97lc3j1i)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="69" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="76" y="71.5352">App.js</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="69" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="76" y="1224.1582">App.js</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="140" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="147" y="71.5352">menuPage</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="140" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="147" y="1224.1582">menuPage</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="240" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="247" y="71.5352">orderConfirm</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="240" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="247" y="1224.1582">orderConfirm</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="362" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="369" y="71.5352">loginComponent</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="362" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="369" y="1224.1582">loginComponent</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="506" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="513" y="71.5352">useInitialise</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="506" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="513" y="1224.1582">useInitialise</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="626" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="633" y="71.5352">useAuth</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="626" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="633" y="1224.1582">useAuth</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="957" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="964" y="71.5352">localStorage</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="957" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="964" y="1224.1582">localStorage</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="1070" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1077" y="71.5352">userContext</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="1070" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1077" y="1224.1582">userContext</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="36" x="1183" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="1190" y="71.5352">API</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="36" x="1183" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="1190" y="1224.1582">API</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="1233" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1240" y="71.5352">useCheckout</text><rect fill="#FEFECE" filter="url(#f1dluw97lc3j1i)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="1233" y="1203.623"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1240" y="1224.1582">useCheckout</text><polygon fill="#A80036" points="87.5,98.4883,97.5,102.4883,87.5,106.4883,91.5,102.4883" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="93.5" y1="102.4883" y2="102.4883"/><polygon fill="#A80036" points="543.5,127.7988,553.5,131.7988,543.5,135.7988,547.5,131.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="99.5" x2="549.5" y1="131.7988" y2="131.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="106.5" y="127.0566">run on initial mount</text><polygon fill="#A80036" points="173,157.1094,183,161.1094,173,165.1094,177,161.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="99.5" x2="179" y1="161.1094" y2="161.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="106.5" y="156.3672">render</text><polygon fill="#A80036" points="651.5,186.4199,661.5,190.4199,651.5,194.4199,655.5,190.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555.5" x2="657.5" y1="190.4199" y2="190.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="562.5" y="185.6777">initialMount()</text><polygon fill="#A80036" points="996.5,215.7305,1006.5,219.7305,996.5,223.7305,1000.5,219.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1002.5" y1="219.7305" y2="219.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="670.5" y="214.9883">getUserDetails()</text><path d="M616,234.7305 L683,234.7305 L683,241.7305 L673,251.7305 L616,251.7305 L616,234.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="567" x="616" y="234.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="631" y="248.2988">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="698" y="247.3652">[user found]</text><polygon fill="#A80036" points="674.5,269.3516,664.5,273.3516,674.5,277.3516,670.5,273.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="668.5" x2="1007.5" y1="273.3516" y2="273.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="680.5" y="268.6094">found details</text><polygon fill="#A80036" points="1109.5,298.6621,1119.5,302.6621,1109.5,306.6621,1113.5,302.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1115.5" y1="302.6621" y2="302.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="670.5" y="297.9199">setUserDetailsToContext(found details)</text><polygon fill="#A80036" points="651.5,334.9727,661.5,338.9727,651.5,342.9727,655.5,338.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="185" x2="657.5" y1="338.9727" y2="338.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="192" y="334.2305">getUser();</text><polygon fill="#A80036" points="1109.5,364.2832,1119.5,368.2832,1109.5,372.2832,1113.5,368.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1115.5" y1="368.2832" y2="368.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="670.5" y="363.541">getDataFromContext()</text><path d="M130,383.2832 L192,383.2832 L192,390.2832 L182,400.2832 L130,400.2832 L130,383.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="107.2422" style="stroke: #000000; stroke-width: 2.0;" width="1053" x="130" y="383.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="145" y="396.8516">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="207" y="395.918">[user]</text><polygon fill="#A80036" points="674.5,417.9043,664.5,421.9043,674.5,425.9043,670.5,421.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="668.5" x2="1120.5" y1="421.9043" y2="421.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="680.5" y="417.1621">user Data;</text><polygon fill="#A80036" points="196,447.2148,186,451.2148,196,455.2148,192,451.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="190" x2="662.5" y1="451.2148" y2="451.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="202" y="446.4727">user details;</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="130" x2="1183" y1="460.2148" y2="460.2148"/><polygon fill="#A80036" points="196,478.5254,186,482.5254,196,486.5254,192,482.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="190" x2="662.5" y1="482.5254" y2="482.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="202" y="477.7832">null;</text><path d="M120,504.5254 L187,504.5254 L187,511.5254 L177,521.5254 L120,521.5254 L120,504.5254 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="343.7266" style="stroke: #000000; stroke-width: 2.0;" width="1123" x="120" y="504.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="135" y="518.0938">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="202" y="517.1602">[Login]</text><polygon fill="#A80036" points="417,539.1465,427,543.1465,417,547.1465,421,543.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="185" x2="423" y1="543.1465" y2="543.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="192" y="538.4043">redirect();</text><polygon fill="#A80036" points="651.5,568.457,661.5,572.457,651.5,576.457,655.5,572.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="429" x2="657.5" y1="572.457" y2="572.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="436" y="567.7148">login(credentials)</text><polygon fill="#A80036" points="1191,597.7676,1201,601.7676,1191,605.7676,1195,601.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1197" y1="601.7676" y2="601.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="670.5" y="597.0254">login(credentials);</text><path d="M130,616.7676 L192,616.7676 L192,623.7676 L182,633.7676 L130,633.7676 L130,616.7676 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="224.4844" style="stroke: #000000; stroke-width: 2.0;" width="1103" x="130" y="616.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="145" y="630.3359">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="207" y="629.4023">[success]</text><polygon fill="#A80036" points="674.5,651.3887,664.5,655.3887,674.5,659.3887,670.5,655.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="668.5" x2="1202" y1="655.3887" y2="655.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="680.5" y="650.6465">token &amp; user details</text><polygon fill="#A80036" points="1109.5,680.6992,1119.5,684.6992,1109.5,688.6992,1113.5,684.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1115.5" y1="684.6992" y2="684.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="670.5" y="679.957">setUserDetailsToContext( token &amp; user details )</text><polygon fill="#A80036" points="996.5,710.0098,1006.5,714.0098,996.5,718.0098,1000.5,714.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1002.5" y1="714.0098" y2="714.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="670.5" y="709.2676">setUserDetailsToLocalStorage(token &amp; user details)</text><polygon fill="#A80036" points="196,739.3203,186,743.3203,196,747.3203,192,743.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="190" x2="1120.5" y1="743.3203" y2="743.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="202" y="738.5781">state change</text><polygon fill="#A80036" points="651.5,768.6309,661.5,772.6309,651.5,776.6309,655.5,772.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="185" x2="657.5" y1="772.6309" y2="772.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="192" y="767.8887">getUser() in useEffect watching userContext</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="130" x2="1233" y1="781.6309" y2="781.6309"/><polygon fill="#A80036" points="674.5,799.9414,664.5,803.9414,674.5,807.9414,670.5,803.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="668.5" x2="1202" y1="803.9414" y2="803.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="680.5" y="799.1992">Error</text><polygon fill="#A80036" points="196,829.252,186,833.252,196,837.252,192,833.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="190" x2="662.5" y1="833.252" y2="833.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="202" y="828.5098">???</text><polygon fill="#A80036" points="284,872.5625,294,876.5625,284,880.5625,288,876.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="185" x2="290" y1="876.5625" y2="876.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="192" y="871.8203">redirect()</text><polygon fill="#A80036" points="651.5,901.873,661.5,905.873,651.5,909.873,655.5,905.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="296" x2="657.5" y1="905.873" y2="905.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="303" y="901.1309">getUser()</text><polygon fill="#A80036" points="307,931.1836,297,935.1836,307,939.1836,303,935.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="301" x2="662.5" y1="935.1836" y2="935.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="313" y="930.4414">user token?</text><path d="M230,950.1836 L292,950.1836 L292,957.1836 L282,967.1836 L230,967.1836 L230,950.1836 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="237.4395" style="stroke: #000000; stroke-width: 2.0;" width="1120" x="230" y="950.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="245" y="963.752">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="307" y="962.8184">[!userToken]</text><polygon fill="#A80036" points="651.5,984.8047,661.5,988.8047,651.5,992.8047,655.5,988.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="296" x2="657.5" y1="988.8047" y2="988.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="303" y="984.0625">register(customer details)</text><polygon fill="#A80036" points="1191,1014.1152,1201,1018.1152,1191,1022.1152,1195,1018.1152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1197" y1="1018.1152" y2="1018.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="670.5" y="1013.373">signup(customer details)</text><polygon fill="#A80036" points="674.5,1043.4258,664.5,1047.4258,674.5,1051.4258,670.5,1047.4258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="668.5" x2="1202" y1="1047.4258" y2="1047.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="680.5" y="1042.6836">customer details &amp; token</text><polygon fill="#A80036" points="1274.5,1072.7363,1284.5,1076.7363,1274.5,1080.7363,1278.5,1076.7363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1280.5" y1="1076.7363" y2="1076.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="670.5" y="1071.9941">createOrder(customer token &amp;&amp; basket items)</text><polygon fill="#A80036" points="1109.5,1102.0469,1119.5,1106.0469,1109.5,1110.0469,1113.5,1106.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1115.5" y1="1106.0469" y2="1106.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="670.5" y="1101.3047">setUserDetailsToContext( token &amp; user details )</text><polygon fill="#A80036" points="996.5,1131.3574,1006.5,1135.3574,996.5,1139.3574,1000.5,1135.3574" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="663.5" x2="1002.5" y1="1135.3574" y2="1135.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="670.5" y="1130.6152">setUserDetailsToLocalStorage(token &amp; user details)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="230" x2="1350" y1="1144.3574" y2="1144.3574"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="235" y="1154.9922">[userToken]</text><polygon fill="#A80036" points="1274.5,1175.623,1284.5,1179.623,1274.5,1183.623,1278.5,1179.623" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="296" x2="1280.5" y1="1179.623" y2="1179.623"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="303" y="1174.8809">createOrder(customer token &amp;&amp; basket items)</text><!--MD5=[d13d97e6127d61da6b41afbf816a95d2]
@startuml
actor Patron
participant "App.js"
participant "menuPage"
participant "orderConfirm"
participant "loginComponent"
participant "useInitialise"
participant "useAuth"
participant "localStorage"
participant "userContext"

Patron -> App.js
"App.js" -> useInitialise : run on initial mount
"App.js" -> menuPage : render
"useInitialise" -> "useAuth" : initialMount()
"useAuth" -> "localStorage" : getUserDetails()
opt user found
"localStorage" -> useAuth : found details
useAuth -> userContext : setUserDetailsToContext(found details)
end
menuPage -> useAuth : getUser();
useAuth -> userContext : getDataFromContext()
alt user
userContext -> useAuth : user Data;
useAuth -> menuPage : user details;
else
useAuth -> menuPage : null;
end
opt Login
menuPage -> loginComponent : redirect();
loginComponent -> useAuth : login(credentials)
useAuth -> API : login(credentials);
alt success
API -> useAuth : token & user details
useAuth -> userContext : setUserDetailsToContext( token & user details )
useAuth -> localStorage : setUserDetailsToLocalStorage(token & user details)
userContext - -> menuPage : state change
menuPage -> useAuth : getUser() in useEffect watching userContext
else
API - -> useAuth : Error
useAuth - -> menuPage : ???
end
end
menuPage -> orderConfirm : redirect()
orderConfirm -> useAuth : getUser()
useAuth -> orderConfirm : user token?
alt !userToken
orderConfirm -> useAuth : register(customer details)
useAuth -> API : signup(customer details)
API -> useAuth : customer details & token
useAuth -> useCheckout : createOrder(customer token && basket items)
useAuth -> userContext : setUserDetailsToContext( token & user details )
useAuth -> localStorage : setUserDetailsToLocalStorage(token & user details)
else userToken
orderConfirm -> useCheckout : createOrder(customer token && basket items)
end
@enduml

PlantUML version 1.2020.10(Sun May 17 10:35:57 BST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 13.0.1+9
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>